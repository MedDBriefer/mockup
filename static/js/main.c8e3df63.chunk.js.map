{"version":3,"sources":["data/traumaScenarioIndexer.js","contexts/PreferencesContext.js","contexts/ScenarioContext.js","components/MDBContainer.js","components/CheckBox.js","components/CallOutText.js","components/CallOutIcon.js","components/InterventionForm.js","components/CheckListItem.js","components/CheckList.js","components/RevealTableRow.js","components/RevealTable.js","components/RaterInfo.js","components/CheckListRaterInfoLayout.js","components/LayoutButtons.js","components/MDBNavBar.js","components/Outline.js","components/MDBDetailsPane.js","components/NavigationDetailsLayout.js","components/MDBModal.js","utils.js","components/ScenarioInfo.js","components/ScenarioInfoButton.js","components/Timer.js","data/scenario.js","routes/Scenario.js","routes/ScenarioList.js","components/UnauthedLayout.js","App.js","index.js"],"names":["HEADING","ASSESS","INTERV","REQURED","CRIT_FAIL","TRAUMA_SCENARIO_STRUCTURE","nodeLabels","tree","id","type","children","leaves","label","callouts","stepId","calloutLabel","criticalCriteria","interventionForms","interventions","steps","addNodeLabelsToBranches","labelsMap","map","step","found","console","error","addLeavesToBranches","items","item","deepCopy","object","JSON","parse","stringify","getAssessmentNodes","assessments","node","push","traumaScenarioIndexer","scenario","assessmentFindings","data","scenarioType","info","initialVitalSigns","SAMPLE","reassessmentVitals","Object","entries","key","value","find","ca","calloutText","log","process","exit","keys","callout","addAssessmentFindingsToLeaves","forEach","element","critsWithParents","filter","crit","parent","heading","addCriticalCriteriaToLeaves","intervention","addInterventionCategorizationsToLeaves","assessmentSteps","defaultPrefs","dispLeafNodesInline","dispAssessmentFindingsInline","inhibitRaterOversharing","noop","PreferencesContext","React","createContext","setPref","getCurrentLayout","setCurrentLayout","isCurrentLayout","PreferencesProvider","props","useContext","AuthContext","isAuthenticated","useState","setDispLeafNodesInline","setDispAssessmentFindingsInline","setInhibitRaterOversharing","layout","setLayout","Provider","name","layoutName","usePrefs","ScenarioContext","ScenarioProvider","defaultValues","currentNode","setCurrentNode","currentAssessmentFinding","setCurrentAssessmentFinding","checkListItems","setCheckListItems","setCriticalCriteria","showForm","showInterventionForm","setShowInterventionForm","vitals","currentVitals","setCurrentVitals","vitalsRecomputed","setVitalsRecomputed","started","setStarted","paused","setPaused","timestamp","setTimestamp","duration","maxTime","action","payload","timeRemaining","expired","timers","setTimers","timerError","setTimerError","actionsQueue","setActionsQueue","useEffect","interval","setInterval","tick","clearInterval","length","currActionString","currActionPayload","currAction","ACTIONS","newTimers","timer","newTimer","assign","newActionsQueue","slice","alert","isChecked","setChecked","boolVal","prevState","toggleChecked","setDisplayInterventionForm","isCurrentAssessmentFinding","toggleAssessmentFinding","stepIsChecked","shouldDisplayInterventionForm","includes","toggleDisplayInterventionForm","setVital","vital","getTimestamp","registerTimer","cancelTimer","clearTimerError","MDBContainer","lhs","rhs","lhsWidth","rhsWidth","Container","fluid","className","Row","Col","md","CheckBox","clickHandler","inlineChildren","classnames","onClick","CallOutText","currentCallOut","CallOutIcon","style","color","InterventionForm","intv","CheckListItem","inlines","isLeafNode","CheckList","depth","first","collapsed","setCollapsed","RevealTableRow","values","show","setShow","index","hidden","RevealTable","title","headings","rows","Table","striped","size","row","RaterInfo","defaultTab","activeTab","setActiveTab","activateTab","tab","isActiveTab","Nav","tabs","NavItem","NavLink","active","TabContent","vitalsHeaders","iv","TabPane","tabId","getVitalsTabPane","sample","rec","getSampleTabPane","displayAssessmentFindings","co","getAssessmentFindingsTabPane","CheckListRaterInfoLayout","LayoutButtons","ButtonGroup","Button","MDBNavBar","leftNav","rightNav","userName","signOutUser","Navbar","dark","NavbarBrand","href","NavbarText","tag","hasChildren","allChildrenAreHeadings","every","child","Outline","MDBDetailsPane","setLabel","setChildren","verticalAlign","NavigationDetailsLayout","MDBModal","dismiss","Modal","isOpen","toggle","backdrop","ModalHeader","ModalBody","formatAsMinSecs","seconds","Date","toISOString","substr","ScenarioInfo","showModal","setShowModal","instructorInformation","patientInformation","moulage","position","actions","dispatchInfo","sceneAssessment","ScenarioInfoButton","Timer","scenTimer","scenarioData","BP","P","R","Skin","Spo2","ETCO2","GCS","Glucose","Pain","Temp","S","A","M","L","E","goodVitals","badVitals","mapArrayOfObjKeysToFalse","array","dict","obj","mapChildObjKeysToFalse","Scenario","scenarioId","setScenario","initValues","setInitValues","scen","defaults","reduce","getDefaultValues","loadScen","ScenarioList","sm","to","UnauthedLayout","App","exact","path","authFlowLayout","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c8e3df63.chunk.js","sourcesContent":["// the scenarios entered via forms are merely a set of fields and values and\n// aren't organized as steps.  the purpose of this file is to define the\n// structure of a trauma scenario, as\n// * a tree of steps (and weave the scenario-speific info into them)\n// * various other mappings of things so they can be looked up by id,  more details later\n\n// const CHECK = \"check-box\";\n// const RADIO = \"radio-button\";\n\nconst HEADING = \"heading\"; //not a leaf node, simply a step which has child steps\n\nconst ASSESS    = \"assessment\";\nconst INTERV    = \"intervention\"; // an action performed on the patient\nconst REQURED   = \"required-action\"   // an action the EMT performs, but not on the patient\nconst CRIT_FAIL = \"critical-criteria\";\n\nconst TRAUMA_SCENARIO_STRUCTURE = {\n    nodeLabels: {\n        \"bsi\":                              \"BSI\",\n        \"scene-size-up\":                    \"Scene Size-Up\",\n        \"initial-assessment-resuscitation\": \"Primary Survey/Resuscitation\",\n        \"general-assessment\":               \"General Impression and LOC\",\n        \"airway\":                           \"Airway\",\n        \"breathing\":                        \"Breathing\",\n        \"circulation\":                      \"Circulation\",\n        \"transport-decision\":               \"Transport Decision\",\n        \"history-taking\":                   \"History Taking\",\n        \"detailed-physical-examination\":    \"Secondary Assessment\",\n        \"head\":                             \"Head\",\n        \"neck\":                             \"Neck\",\n        \"chest\":                            \"Chest\",\n        \"abdomen-pelvis\":                   \"Abdomen/pelvis\",\n        \"lower-extremities\":                \"Lower extremities\",\n        \"upper-extremities\":                \"Upper extremities\",\n        \"posterior-thorax-lumbar-buttocks\": \"Posterior thorax, lumbar, and buttocks\",\n        \"misc\":                             \"Ongoing management and reassessment\",\n        \"critical-criteria\":                \"Critical Criteria\"\n    },\n    tree: [\n        { id: \"bsi\",           type: HEADING },\n        { id: \"scene-size-up\", type: HEADING },\n        {\n            id: \"initial-assessment-resuscitation\",\n            type: HEADING,\n            children: [\n                { id: 'general-assessment', type: HEADING },\n                { id: \"airway\",             type: HEADING },\n                { id: \"breathing\",          type: HEADING },\n                { id: \"circulation\",        type: HEADING },\n                { id: \"transport-decision\", type: HEADING }\n            ]\n        },\n        { id: \"history-taking\", type: HEADING },\n        {\n            id: \"detailed-physical-examination\",\n            type: HEADING,\n            children: [\n                { id: \"head\",                             type: HEADING },\n                { id: \"neck\",                             type: HEADING },\n                { id: \"chest\",                            type: HEADING },\n                { id: \"abdomen-pelvis\",                   type: HEADING },\n                { id: \"lower-extremities\",                type: HEADING },\n                { id: \"upper-extremities\",                type: HEADING },\n                { id: \"posterior-thorax-lumbar-buttocks\", type: HEADING },\n                { id: \"misc\",                             type: HEADING }\n            ]\n        },\n        { id: \"critical-criteria\", type: HEADING }\n    ],\n    leaves: {\n        'bsi': [\n            { id: \"apply-ppe\",  type: REQURED, label: \"Takes or verbalizes appropriate PPE precautions.\" } // crit criteria 590\n        ],\n        'scene-size-up': [\n            { id: \"assess-scene-safety\",     type: ASSESS, label: \"Determines the scene/situation is safe\" },\n            { id: \"assess-injury-mechanism\", type: ASSESS, label: \"Determines the mechanism of injury/nature of illness\" },\n            { id: \"assess-num-patients\",     type: ASSESS, label: \"Determines the number of patients\" },\n            { id: \"request-addl-help\",       type: ASSESS, label: \"Requests additional help if necessary\" },\n            { id: \"stabilizes-spine\",        type: INTERV, label: \"Stabilizes or directs assistant to stabilize the cervical spine, as indicated\" } // crit criteria 610\n        ],\n        'general-assessment': [\n            { id: \"verbalizes-patient-condition\", type: ASSESS, label: \"Verbalizes general impression of the patient\" },\n            { id: \"determines-loc\",               type: ASSESS, label: \"Determines responsiveness/level of consciousness\" },\n            { id: \"determines-life-threats\",      type: ASSESS, label: \"Determines chief complaint/apparent life-threats\" }\n        ],\n        'airway': [\n            { id: \"assess-airway\",    type: ASSESS, label: \"Opens and assesses airway\" },\n            { id: \"inserts-adjunct\",  type: INTERV, label: \"Inserts appropriately sized adjunct\" }, // action / crit criteria 690\n            { id: \"manages-airway\",   type: INTERV, label: \"Appropriately manages any problems associated with airway\"}\n        ],\n        'breathing': [\n            { id: \"assess-breathing\",        type: ASSESS, label: \"Assesses breathing\" },\n            { id: \"assess-ventilation\",      type: ASSESS, label: \"Assures adequate ventilation\" },\n            { id: \"oxygen-therapy\",          type: INTERV, label: \"Administers oxygen\" }, // crit criteria 620\n            { id: \"manage-breathing-injury\", type: INTERV, label: \"Manages any injury that may compromise breathing/ventilation\" } // crit criteria 630\n        ],\n        'circulation': [\n            { id: \"assess-pulse\",     type: ASSESS, label: \"Checks pulse\" },\n            { id: \"assess-skin\",      type: ASSESS, label: \"Assesses skin [either skin color, temperature, or condition]\" },\n            { id: \"assess-bleeding\",  type: ASSESS, label: \"Assesses for major bleeding\" },\n            { id: \"control-bleeding\", type: INTERV, label: \"Controls major bleeding if present\" },\n            { id: \"control-shock\",    type: INTERV, label: \"Initiates shock management\" } // crit criteria 640\n        ],\n        'transport-decision': [\n            { id: \"transport-priority\", type: REQURED, label: \"Identifies priority patients/makes transport decision based upon calculated GCS\" } // crit criteria 650\n        ],\n        'history-taking': [\n            { id: \"obtains-vitals\",        type: ASSESS, label: \"Obtains, or directs assistant to obtain, baseline vital signs\" }, // point to vitals\n            { id: \"attempt-obtain-sample\", type: ASSESS, label: \"Attempts to obtain SAMPLE history\" } // point to SAMPLE\n        ],\n        'head': [\n            { id: \"assess-mouth-nose-face\", type: ASSESS, label: \"Inspects mouth, nose, and assesses facial area\" },\n            { id: \"assess-scape-ears\",      type: ASSESS, label: \"Inspects and palpates scalp and ears\" },\n            { id: \"assess-perrl\",           type: ASSESS, label: \"Assesses eyes for PERRL\" }\n        ],\n        'neck': [\n            { id: \"assess-trachea\", type: ASSESS, label: \"Inspects position of trachea\" },\n            { id: \"assess-jugular\", type: ASSESS, label: \"Checks jugular veins\" },\n            { id: \"assess-spine\",   type: ASSESS, label: \"Palpates cervical spine\" }\n        ],\n        'chest': [\n            { id: \"inspects-chest\",   type: ASSESS, label: \"Inspects chest\" },\n            { id: \"palpate-chest\",    type: ASSESS, label: \"Palpates chest\" },\n            { id: \"auscultate-chest\", type: ASSESS, label: \"Auscultates chest\" }\n        ],\n        'abdomen-pelvis': [\n            { id: \"assess-abdomen\",   type: ASSESS, label: \"Inspects and palpates abdomen\" },\n            { id: \"assess-pelvis\",    type: ASSESS, label: \"Assesses pelvis\" },\n            { id: \"assess-genitalia\", type: ASSESS, label: \"Verbalizes assessment of genitalia/perineum as needed\" }\n        ],\n        'lower-extremities': [\n            { id: \"assess-right-leg\", type: ASSESS, label: \"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on right lower extremity\" },\n            { id: \"assess-left-leg\",  type: ASSESS, label: \"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on left lower extremity\" }\n        ],\n        'upper-extremities': [\n            { id: \"assess-right-arm\", type: ASSESS, label: \"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on right upper extremity\" },\n            { id: \"assess-left-arm\",  type: ASSESS, label: \"Inspects, palpates, and assesses motor, sensory, and distal circulatory functions on left upper extremity\" }\n        ],\n        \"posterior-thorax-lumbar-buttocks\": [\n            { id: \"assess-posterior-thorax\", type: ASSESS, label: \"Inspects and palpates posterior thorax\" },\n            { id: \"assess-lumbar-buttocks\",  type: ASSESS, label: \"Inspects and palpates lumbar and buttocks area\" }\n        ],\n        \"misc\": [\n            { id: \"manage-secondary-injuries\", type: REQURED, label: \"Manages secondary injuries and wounds appropriately\" },\n            { id: \"performs-ongoing-assessment\", type: REQURED, label: \"Reassesses Patient\" }\n        ],\n        \"critical-criteria\": [] // these need to all be woven in by the scenario builder, as what goes here is depending on some options\n    },\n    callouts: [\n        { stepId: \"assess-scene-safety\",           calloutLabel: \"Scene Safety\" },\n        { stepId: \"assess-injury-mechanism\",       calloutLabel: \"Mechanism of Injury\" },\n        { stepId: \"assess-num-patients\",           calloutLabel: \"Num Patients\" },\n        { stepId: \"request-addl-help\",             calloutLabel: \"Additional Help\" },\n        { stepId: \"verbalizes-patient-condition\",  calloutLabel: \"Condition\" },\n        { stepId: \"determines-loc\",                calloutLabel: \"LOC\" },\n        { stepId: \"determines-life-threats\",       calloutLabel: \"Life Threats\" },\n        { stepId: \"assess-airway\",                 calloutLabel: \"Airway\" },\n        { stepId: \"assess-breathing\",              calloutLabel: \"Breathing\" },\n        { stepId: \"assess-ventilation\",            calloutLabel: \"Ventilations\" },\n        { stepId: \"assess-pulse\",                  calloutLabel: \"Pulse\" },\n        { stepId: \"assess-skin\",                   calloutLabel: \"Skin\" },\n        { stepId: \"assess-bleeding\",               calloutLabel: \"Bleeding\" },\n        { stepId: \"assess-mouth-nose-face\",        calloutLabel: \"Face\" },\n        { stepId: \"assess-scape-ears\",             calloutLabel: \"Ears\" },\n        { stepId: \"assess-perrl\",                  calloutLabel: \"PERRL\" },\n        { stepId: \"assess-trachea\",                calloutLabel: \"Trachea\" },\n        { stepId: \"assess-jugular\",                calloutLabel: \"Jugular\" },\n        { stepId: \"assess-spine\",                  calloutLabel: \"Assess C-Spine\" },\n        { stepId: \"inspects-chest\",                calloutLabel: \"Inspect Chest\" },\n        { stepId: \"palpate-chest\",                 calloutLabel: \"Palpate Chest\" },\n        { stepId: \"auscultate-chest\",              calloutLabel: \"Auscultates Chest\" },\n        { stepId: \"assess-abdomen\",                calloutLabel: \"Abdomen\" },\n        { stepId: \"assess-pelvis\",                 calloutLabel: \"Pelvis\" },\n        { stepId: \"assess-genitalia\",              calloutLabel: \"Genitalia\" },\n        { stepId: \"assess-left-leg\",               calloutLabel: \"Left Leg\" },\n        { stepId: \"assess-right-leg\",              calloutLabel: \"Right Leg\" },\n        { stepId: \"assess-left-arm\",               calloutLabel: \"Left Arm\" },\n        { stepId: \"assess-right-arm\",              calloutLabel: \"Right Arm\" },\n        { stepId: \"assess-posterior-thorax\",       calloutLabel: \"Posterior/Thorax\" },\n        { stepId: \"assess-lumbar-buttocks\",        calloutLabel: \"Lumbar/Buttocks\" }\n    ],\n    criticalCriteria: [\n        // we might be able to auto-check based off of timer expiring\n        // { id: \"critial-failure-timely-transport-decision\",       type: CRIT_FAIL, parent: \"transport-decision\", label: \"Failure to initiate or call for transport of the patient within 10 minute time limit\" },\n        // true if 'apply-ppe' not checked?\n        // { id: \"critical-failure-ppe\",                            type: CRIT_FAIL, parent: \"bsi\",                label: \"Failure to take or verbalize appropriate PPE precautions\" },\n        // true if 'assess-scene-safety' not checked?\n        // { id: \"critical-failure-scene-safety\",                   type: CRIT_FAIL, parent: \"scene-size-up\",      label: \"Failure to determine scene safety\" },\n        // true if 'stabilize-spine' not checked AND indicated?\n        // { id: \"critical-failure-spinal-protection\",              type: CRIT_FAIL, parent: \"scene-size-up\",      label: \"Failure to assess for and provide spinal protection when indicated\" },\n        // { id: \"critical-failure-oxygen-supply\",                  type: CRIT_FAIL, parent: \"breathing\",          label: \"Failure to voice and ultimately provide high concentration of oxygen\" },\n        // true if ANY of the ventiliation\n        // { id: \"critical-failure-ventilation\",                    type: CRIT_FAIL, parent: \"breathing\",          label: \"Failure to assess/provide adequate ventilation\" },\n        // not giving this one a parent, as it belongs to a heading whose only other children are other headings, making it\n        // problematic in the navigation/details layout - readdress this if we don't go with that\n        // { id: \"critical-failure-manage-life-threats\",            type: CRIT_FAIL,                               label: \"Failure to find or appropriately manage problems associated with airway, breathing, hemorrhage or shock [hypoperfusion]\" },\n        // combine below with 580?\n        // { id: \"critical-failure-differentiate-immediate-transport-vs-on-scene-treatment\",  type: CRIT_FAIL, parent: \"transport-decision\", label: \"Failure to differentiate patient's need for immediate transportation versus continued assessment/treatment at the scene\" },\n        // { id: \"critical-failure-prioritizing-non-life-threats\",  type: CRIT_FAIL,                               label: \"Does other detailed history or physical exam before assessing/treating threats to airway, breathing, and circulation\" },\n        // { id: \"critical-failure-incompetence\",                   type: CRIT_FAIL,                               label: \"Failure to manage the patient as a competent EMT\" },\n        // { id: \"critical-failure-unacceptable-affect\",            type: CRIT_FAIL,                               label: \"Exhibits unacceptable affect with patient or other personnel\" },\n        { id: \"critical-failure-inapproriate-intervention\",      type: CRIT_FAIL,                               label: \"Uses or orders a dangerous or inappropriate intervention\" },\n        { id: \"critical-failure-inapproriate-behavior\",          type: CRIT_FAIL,                               label: \"Exhibits unprofessional behavior\" }\n    ],\n    interventionForms: {\n        // Each selected intervention should, by default, also include an 'other / incorrect intervention' option\n        // Each object title matches checklist item id for easier mapping\n        \"stabilizes-spine\": {\n            id: \"c-spine-interventions\",\n            interventions: [\n                { id: \"c-spine-intervention-10\", label: \"Holds manual stabilization\" },\n                { id: \"c-spine-intervention-20\", label: \"Applies cervical collar\" }\n            ],\n            steps: [\n                { id: 'bogus-step-1', label: \"bogus step 1\" },\n                { id: 'bogus-step-2', label: \"bogus step 2\" }\n            ],\n            criticalCriteria: [\n                { id: \"bogus-crit-1\", label: \"bogus critical criteria 1\" },\n                { id: \"bogus-crit-2\", label: \"bogus critical criteria 2\" },\n            ]\n        },\n        \"inserts-adjunct\": {\n            id: \"adjunct-interventions\",\n            interventions: [\n                { id: \"adjunct-intervention-10\", label: \"Inserts OPA\" },\n                { id: \"adjunct-intervention-20\", label: \"Inserts NPA\" },\n            ],\n            steps: [\n                { id: 'bogus-step-1', label: \"bogus step 1\" },\n                { id: 'bogus-step-2', label: \"bogus step 2\" }\n            ],\n            criticalCriteria: [\n                { id: \"bogus-crit-1\", label: \"bogus critical criteria 1\" },\n                { id: \"bogus-crit-2\", label: \"bogus critical criteria 2\" },\n            ]\n        },\n        \"manages-airway\": {\n            id: \"airway-interventions\",\n            interventions: [\n                { id: \"airway-intervention-10\", label: \"bogus intervetion1\" },\n                { id: \"airway-intervention-20\", label: \"bogus intervention2\" },\n            ],\n            steps: [\n                { id: 'bogus-step-1', label: \"bogus step 1\" }\n            ],\n            criticalCriteria: [\n                { id: \"bogus-crit-1\", label: \"bogus critical criteria 1\" },\n                { id: \"bogus-crit-2\", label: \"bogus critical criteria 2\" },\n                { id: \"bogus-crit-3\", label: \"bogus critical criteria 3\" },\n            ]\n        },\n        \"oxygen-therapy\": {\n            id: \"oxygen-therapy-interventions\",\n            interventions: [\n                { id: \"ventilation-intervention-10\", label: \"Endotracheal intubation\" },\n                { id: \"ventilation-intervention-20\", label: \"Bag-valve mask\" },\n            ],\n            steps: [\n                { id: \"bogus-step-1\", label: \"bogus step 1\" },\n                { id: \"bogus-step-2\", label: \"bogus step 2\" },\n            ],\n            criticalCriteria: [\n                { id: \"bogus-crit-1\", label: \"bogus critical criteria 1\" },\n                { id: \"bogus-crit-2\", label: \"bogus critical criteria 2\" },\n            ]\n        },\n        \"manage-breathing-injury\": {\n            id: \"manage-breathing-injury-intervention\",\n            interventions: [\n                {id: \"manage-breathing-intervention-10\", label: \"bogus intervention 1\"},\n                {id: \"manage-breathing-intervention-29\", label: \"bogus intervention 2\"}\n            ],\n            steps: [\n                {id: \"bogus-step-1\", label: \"bogus step 1\" },\n                {id: \"bogus-step-2\", label: \"bogus step 2\" },\n            ],\n            criticalCriteria: [\n                { id: \"bogus-crit-1\", label: \"bogus critical criteria 1\" },\n                { id: \"bogus-crit-2\", label: \"bogus critical criteria 2\" },\n\n            ]\n        },\n        \"control-bleeding\": {\n            id: \"bleeding-interventions\",\n            interventions: [\n                { id: \"bleeding-intervention-10\", label: \"Applies direct pressure\" },\n                { id: \"bleeding-intervention-20\", label: \"Applies tourniquet\" }\n            ],\n            steps: [\n                { id: \"bogus-step-1\", label: \"bogus step 1\" },\n                { id: \"bogus-step-2\", label: \"bogus step 2\" },\n            ],\n            criticalCriteria: [ // Critical criteria should automatically be check boxes\n                { id: \"bleeding-crit-30\", type: CRIT_FAIL, label: \"Did not control hemorrhage using correct procedures in a timely manner\" },\n                { id: \"bleeding-crit-40\", type: CRIT_FAIL, label: \"Did not apply direct pressure to wound before applying tourniquet\" },\n                { id: \"bleeding-crit-50\", type: CRIT_FAIL, label: \"Did not properly position the patient\" },\n                { id: \"bleeding-crit-60\", type: CRIT_FAIL, label: \"Did not take steps to prevent heat loss\" }\n            ]\n        },\n        \"control-shock\": {\n            id: \"shock-interventions\",\n            interventions: [\n                { id: \"shock-intervention-10\", label: \"IV fluid therapy--Peripheral IV insertion\" },\n                { id: \"shock-intervention-20\", label: \"IV fluid therapy--IV Push/Bolus\" },\n                { id: \"shock-intervention-30\", label: \"Covers patient\" }\n            ],\n            steps: [\n                { id: \"bogus-step-1\", label: \"bogus step 1\" },\n                { id: \"bogus-step-2\", label: \"bogus step 2\" },\n            ],\n            criticalCriteria: [\n                { id: \"shock-crit-10\", type: CRIT_FAIL, label: \"Fails to establish a patent and properly adjusted IV within 6-minute time limit\" },\n                { id: \"shock-crit-20\", type: CRIT_FAIL, label: \"Fails to establish IV within 3 attempts during 6-minute time limit\" },\n                { id: \"shock-crit-30\", type: CRIT_FAIL, label: \"Contaminates equipment or site without appropriately correcting situation\" },\n                { id: \"shock-crit-40\", type: CRIT_FAIL, label: \"Performs any improper technique resulting in the potential for uncontrolled hemorrhage, catheter shear, or air embolism\" },\n                { id: \"shock-crit-50\", type: CRIT_FAIL, label: \"Fails to dispose/verbalize disposal of blood-contaminated sharps immediately in proper container at point of use\" }\n            ]\n        },\n        \"transport-priority\": {\n            id: \"transport-interventions\",\n            interventions: [\n                { id: \"transport-intervention-10\", label: \"Scoop Stretcher\" },\n                { id: \"transport-intervention-20\", label: \"Supine Long Backboard\" },\n            ],\n            steps: [\n                { id: \"bogus-step-1\", label: \"bogus step 1\" },\n                { id: \"bogus-step-2\", label: \"bogus step 2\" },\n            ],\n            criticalCriteria: [\n                { id: \"transport-crit-10\", type: CRIT_FAIL, label: \"Did not immediately direct or take manual immobilization of head\" },\n                { id: \"transport-crit-20\", type: CRIT_FAIL, label: \"Did not properly apply appropriately sized cervical collar before ordering releaseof manual immobilization\" },\n                { id: \"transport-crit-30\", type: CRIT_FAIL, label: \"Released or ordered relase of manual immobilization before it was maintained mechanically\" },\n                { id: \"transport-crit-40\", type: CRIT_FAIL, label: \"Manipulated or moved patient excessively causing potential spinal compromise\" },\n                { id: \"transport-crit-50\", type: CRIT_FAIL, label: \"Head immobilized to the device before device sufficiently secured to torso\" },\n                { id: \"transport-crit-60\", type: CRIT_FAIL, label: \"Patient moves excessively up, down, left, or right on the device\" },\n                { id: \"transport-crit-70\", type: CRIT_FAIL, label: \"Head immobilization allows for excessive movement\" },\n                { id: \"transport-crit-80\", type: CRIT_FAIL, label: \"Upon completion of immobilization, head is not in a neutral, in-line position\" },\n                { id: \"transport-crit-90\", type: CRIT_FAIL, label: \"Did not reassess motor, sensory, and circulatory functions in each extremity after immobilizing patient to the device\" }\n            ]\n        }\n    }\n};\n\n\n\nfunction addAssessmentFindings(assessmentFindings) {\n    return Object.entries(assessmentFindings).map(([key, value]) => {\n        const found = TRAUMA_SCENARIO_STRUCTURE.callouts.find((ca) => ca.stepId === key)\n        if (found) {\n            found.calloutText = value;\n        } else {\n            console.log(\"ERROR key not found!\", key);\n            process.exit(1)\n        }\n        return found;\n    })\n}\n\n\n// eslint-disable-next-line\nfunction addAssessmentFindingsToLeaves(items, callouts) {\n\n    for (const { stepId, calloutLabel, calloutText } of callouts) {\n        // console.log(stepId, calloutLabel, calloutText)\n        for (const key of Object.keys(items)) {\n            let children = items[key].map((item) =>\n                item.id === stepId\n                    ? { ...item, calloutLabel: calloutLabel, callout: calloutText }\n                    : item\n            )\n            items[key] = children\n        }\n    }\n    return items;\n}\n\nfunction addInterventionCategorizationsToLeaves(items, interventions) {\n    for (const [stepId, value] of Object.entries(interventions)) {\n        for (const key of Object.keys(items)) {\n            let children = items[key].map((item) =>\n                item.id === stepId\n                    ? {...item, intervention: value}\n                    : item\n            )\n            items[key] = children\n        }\n    }\n}\n\nfunction addCriticalCriteriaToLeaves(items, criticalCriteria) {\n    // add all to the critical criteria step, components can elect not to display\n    // ones with parents\n    criticalCriteria.forEach(element => {\n        items['critical-criteria'].push(element)\n    });\n    // append specific ones to the approriate 'items' based off their parent\n    // (if present)\n\n    const critsWithParents = criticalCriteria.filter((crit) => !!crit.parent)\n    for (const heading of Object.keys(items)) {\n        // console.log(\"\\n\", heading)\n        for (const crit of critsWithParents.filter((crit) => crit.parent === heading)) {\n            items[heading].push(crit)\n        }\n    }\n    // process.exit(0)\n}\n\n\n\nfunction addEmptyChildren(array) {\n    return array.map((item) =>\n        !item.children\n            ? { ...item, children: [] }\n            : item\n    )\n}\n\nfunction addNodeLabelsToBranches(steps, labelsMap) {\n    return steps.map((step) => {\n        let found = (step.id in labelsMap) ? labelsMap[step.id] : false;\n        if (!found) {\n            console.error(`label for ${step.id} not found!`)\n        } else {\n            step.label = found;\n        }\n        if (step.children) {\n            step.children = addNodeLabelsToBranches(step.children, labelsMap)\n        }\n        return step\n    })\n}\n\nfunction addLeavesToBranches(steps, items) {\n    return steps.map((step) => {\n        if (!step.children) {\n            step.children = (step.id in items) ? addEmptyChildren(items[step.id]) : []\n        } else {\n            step.children = addLeavesToBranches(step.children, items);\n        }\n        return step;\n    });\n}\n\nfunction deepCopy(object) {\n    return JSON.parse(JSON.stringify(object))\n}\n\nfunction getAssessmentNodes(tree, assessments=[]) {\n    // console.log(tree)\n    for (const node of tree) {\n        if (node.type === 'assessment') {\n            assessments.push(node)\n        } else if (node.type === 'heading') {\n            assessments = getAssessmentNodes(node.children, assessments)\n        }\n    }\n    return assessments;\n}\n\nconst traumaScenarioIndexer = (scenario) => {\n    const data = {\n        id: scenario.id,\n        scenarioType: scenario.scenarioType,\n        info: scenario.info,\n        initialVitalSigns: scenario.initialVitalSigns,\n        SAMPLE: scenario.SAMPLE,\n        reassessmentVitals: scenario.reassessmentVitals,\n        interventionForms: deepCopy(TRAUMA_SCENARIO_STRUCTURE.interventionForms),\n        criticalCriteria: deepCopy(TRAUMA_SCENARIO_STRUCTURE.criticalCriteria),\n        nodeLabels: deepCopy(TRAUMA_SCENARIO_STRUCTURE.nodeLabels),\n        items: deepCopy(TRAUMA_SCENARIO_STRUCTURE.leaves),\n    }\n    // callouts are defined separately, as 1. it's easier to access them from the\n    // right pane this way, and 2. it's easier to modify their labels if they're listed\n    // sequentially, rather than in the tree or leaves structures\n    // also, while we've changed the labels to 'Assessment Findings', I'm keeping things\n    // as callouts now, so we don't have to change all of the props, code, etc\n    data.callouts = addAssessmentFindings(scenario.assessmentFindings)\n    addAssessmentFindingsToLeaves(data.items, data.callouts)\n    addCriticalCriteriaToLeaves(data.items, TRAUMA_SCENARIO_STRUCTURE.criticalCriteria)\n    addInterventionCategorizationsToLeaves(data.items, scenario.interventions)\n    const steps = addNodeLabelsToBranches(TRAUMA_SCENARIO_STRUCTURE.tree, TRAUMA_SCENARIO_STRUCTURE.nodeLabels)\n    data.steps = addLeavesToBranches(steps, data.items)\n\n    // filter through tree of steps, creating ordered list of assessment steps'\n    const assessments = getAssessmentNodes(steps)\n    // console.log(assessments)\n    data.assessmentSteps = assessments;\n    return data;\n}\n\n\nexport default traumaScenarioIndexer\n","import React, { useState, useContext } from \"react\"\n\nimport { AuthContext } from \"@meddbriefer/mdb-auth\"\n\nconst defaultPrefs = {\n    dispLeafNodesInline: false,\n    dispAssessmentFindingsInline: true,\n    inhibitRaterOversharing: true\n}\n\nconst noop = () => {}\n\nexport const PreferencesContext = React.createContext({\n    ...defaultPrefs,\n    setPref: noop,\n    getCurrentLayout: noop,\n    setCurrentLayout: noop,\n    isCurrentLayout: noop\n})\n\n\nexport const PreferencesProvider = (props) => {\n    const { isAuthenticated } = useContext(AuthContext)\n    const [dispLeafNodesInline, setDispLeafNodesInline] = useState(defaultPrefs.dispLeafNodesInline)\n    const [dispAssessmentFindingsInline, setDispAssessmentFindingsInline] = useState(defaultPrefs.dispAssessmentFindingsInline)\n    const [inhibitRaterOversharing, setInhibitRaterOversharing] = useState(defaultPrefs.inhibitRaterOversharing)\n    const [layout, setLayout] = useState(\"layout1\")\n\n\n    const getCurrentLayout = () => layout\n    const isCurrentLayout = (layoutName) => layoutName === layout\n\n    const setPref = (name, value) => {\n        switch(name) {\n            case \"dispLeafNodesInline\":\n                setDispLeafNodesInline(value)\n                break\n            case \"dispAssessmentFindingsInline\":\n                setDispAssessmentFindingsInline(value)\n                break;\n            case \"inhibitRaterOversharing\":\n                setInhibitRaterOversharing(value)\n                break\n            default:\n                console.log(`not setting unknown pref ${name} to ${value}`)\n        }\n    }\n    const setCurrentLayout = (layout) => {\n        switch(layout) {\n            case \"layout1\":\n                setDispLeafNodesInline(false)\n                setLayout(\"layout1\")\n                break\n            default:\n                // set to layout2 no matter what was passed in\n                setDispLeafNodesInline(true)\n                setLayout(\"layout2\")\n                break\n        }\n    }\n\n    return (\n        <PreferencesContext.Provider\n            value={{\n                dispLeafNodesInline,\n                dispAssessmentFindingsInline,\n                inhibitRaterOversharing,\n                setPref,\n                getCurrentLayout,\n                setCurrentLayout,\n                isCurrentLayout\n            }}\n        >\n            {props.children}\n        </PreferencesContext.Provider>\n    )\n}\n\nexport const usePrefs = () => useContext(PreferencesContext)\n","import React, { useState, useEffect } from \"react\"\n\nexport const ScenarioContext = React.createContext()\n\nexport const ScenarioProvider = ({scenario, defaultValues, children}) =>{\n\n    const [currentNode, setCurrentNode] = useState(defaultValues.currentNode)\n    const [currentAssessmentFinding, setCurrentAssessmentFinding] = useState(null)\n    const [checkListItems, setCheckListItems] = useState(defaultValues.checkListItems)\n    const [criticalCriteria, setCriticalCriteria] = useState(defaultValues.criticalCriteria)\n    const [showInterventionForm, setShowInterventionForm] = useState(defaultValues.showForm)\n    const [currentVitals, setCurrentVitals] = useState(defaultValues.vitals)\n    const [vitalsRecomputed, setVitalsRecomputed] = useState(defaultValues.vitalsRecomputed)\n\n    const [started, setStarted] = useState(false)\n    const [paused, setPaused] = useState(false)\n    const [timestamp, setTimestamp] = useState(0)\n    const [timers, setTimers] = useState([{id: 'scenario', duration: scenario.info.maxTime * 60, action:{type: \"foo\", payload: \"foo payload\"}, timeRemaining: scenario.info.maxTime * 60, expired: false}])\n    const [timerError, setTimerError] = useState(null)\n    const [actionsQueue, setActionsQueue] = useState([])\n\n    // expose accesor rather than timestamp, in effect making it a private variable\n    const getTimestamp = () => timestamp\n\n    const clearTimerError = () => setTimerError(null)\n\n    useEffect(() => {\n      const interval = setInterval(() => tick(), 1000)\n      // cleanup interval\n      return () => {\n        clearInterval(interval)\n      }\n    })\n\n    useEffect(() => {\n        if (Object.keys(actionsQueue).length !== 0) {\n            let currActionString = actionsQueue[0].type;\n            let currActionPayload = actionsQueue[0].payload;\n            let currAction = ACTIONS[currActionString];\n\n            currAction(currActionPayload);\n        }\n    }, [actionsQueue])\n\n    useEffect(\n        () => {\n            // as both class components .setState() and functional components useState() setters\n            // both actually queue the setting of state, as an performance optimization for when\n            // there are individual requests for state changes made in a relatively short period\n            // of time,  making use of a useEffect() with a dependency array of all state variables\n            // we're interested in persisting to the db is a perfect place to capture when they\n            // have actually been changed, and thus persist those changes.  since we're not hooked\n            // up to the db yet, I'm merely console.log()ing that things have changed, and listing\n            // what state we'll be persisting to the db.\n            console.log(\"current state\", {\n                currentNode,\n                currentAssessmentFinding,\n                checkListItems,\n                criticalCriteria,\n                showInterventionForm,\n                currentVitals,\n                vitalsRecomputed\n            })\n        },\n        [\n            currentNode,\n            currentAssessmentFinding,\n            checkListItems,\n            criticalCriteria,\n            showInterventionForm,\n            currentVitals,\n            vitalsRecomputed\n        ]\n    )\n\n    const tick = () => {\n        if (started && !paused) {\n            setTimestamp(timestamp + 1);  // Increase the timestamp by 1 if the timers have been started and are not paused\n            const newTimers = timers.map((timer) => {\n                const newTimer = Object.assign(timer)\n                if (!timer.expired) {\n                    if (timer.timeRemaining === 1) {\n                        newTimer.expired = true\n                        if (newTimer.action != null) {  // != instead of !== is intentional\n                            const newActionsQueue = actionsQueue.slice();\n                            newActionsQueue.push(newTimer.action);\n                            setActionsQueue(newActionsQueue);\n                        }\n                    }\n                    newTimer.timeRemaining--\n                }\n                return newTimer\n            })\n            setTimers(newTimers)\n        }\n    }\n\n    const registerTimer = (id, duration, action = null, timeRemaining = null, expired = false) => {\n        timeRemaining = timeRemaining ?? duration\n        const found = timers.find((timer) => timer.id === id)\n        if (found) {\n            setTimerError(`ERROR: timer: \"${id}\" already registered`)\n        } else {\n            const newTimers = timers.slice()\n            newTimers.push({ id, duration, action, timeRemaining, expired })\n            setTimers(newTimers)\n        }\n    }\n\n    const cancelTimer = (id) => {\n        const found = timers.find((timer) => timer.id === id);\n        if (found) {\n            let newTimers = timers.filter(timer => timer.id != id);  // Returns an array with everything except the removed timer\n            setTimers(newTimers);\n        } else {\n            setTimerError(`ERROR: timer: \"${id}\" not found`)\n        }\n    }\n\n    // Actions begin\n    const foo = (payload) => {\n        alert(payload);\n    }\n\n    const bar = () => {\n        alert(\"bar\");\n    }\n\n    const ACTIONS = {\n        \"foo\": foo,\n        \"bar\": bar\n    }\n    // Actions end\n\n\n    const isChecked = (id) => {\n        return checkListItems[id]\n    }\n\n    const setChecked = (id, boolVal) => {\n        setCheckListItems(prevState => ({\n            ...prevState, [id]: boolVal\n        }))\n    }\n\n    const toggleChecked = (id) => {\n        setChecked(id, !checkListItems[id])\n    }\n\n    const isCurrentAssessmentFinding = (id) => {\n        return !!currentAssessmentFinding && currentAssessmentFinding === id\n    }\n\n    const toggleAssessmentFinding = (id) => {\n        const stepIsChecked = isChecked(id)\n        setCurrentAssessmentFinding(!stepIsChecked ? id : null)\n        toggleChecked(id)\n    }\n\n    const shouldDisplayInterventionForm = (id) => {\n        return Object.keys(showInterventionForm).includes(id) && showInterventionForm[id]\n    }\n\n    const setDisplayInterventionForm = (id, boolVal) => {\n        setShowInterventionForm(prevState => ({\n            ...prevState, [id]: boolVal\n        }))\n    }\n\n    const toggleDisplayInterventionForm = (id) => {\n        setDisplayInterventionForm(id, !showInterventionForm[id])\n    }\n\n    const setVital = (vital, value) => {\n        setCurrentVitals(prevState => ({\n            ...prevState, [vital]: value\n        }))\n    }\n\n\n    return (\n        <ScenarioContext.Provider\n            value={{\n                scenario,\n                isChecked,\n                setChecked,\n                toggleChecked,\n                currentNode,\n                setCurrentNode,\n                isCurrentAssessmentFinding,\n                toggleAssessmentFinding,\n                shouldDisplayInterventionForm,\n                setDisplayInterventionForm,\n                toggleDisplayInterventionForm,\n                setCriticalCriteria,\n                currentVitals,\n                setVital,\n                vitalsRecomputed,\n                setVitalsRecomputed,\n                started,\n                setStarted,\n                paused,\n                setPaused,\n                getTimestamp,\n                timers,\n                timerError,\n                actionsQueue,\n                registerTimer,\n                cancelTimer,\n                clearTimerError,\n                setTimerError\n            }}\n        >\n            {children}\n        </ScenarioContext.Provider>\n    )\n}","import React from 'react'\nimport {\n    Container,\n    Row,\n    Col\n} from 'reactstrap'\n\nconst MDBContainer = ({lhs, rhs, lhsWidth=6, rhsWidth=6}) => {\n\n    return (\n        <Container fluid={true} className=\"main\">\n            <Row>\n                <Col md={lhsWidth} className=\"col\">\n                    {lhs}\n                </Col>\n                <Col md={rhsWidth} className=\"col\">\n                    {rhs}\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\nexport default MDBContainer","import React, { useContext } from \"react\";\n\nimport classnames from \"classnames\"\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nconst CheckBox = (props) => {\n  // need props param to exist in order to access props.children\n\n  const { step, clickHandler, inlineChildren = [] } = props\n\n  const { isChecked } = useContext(ScenarioContext)\n\n  return (\n    <>\n      <label\n        className={classnames({\"text-danger\": step.type === 'critical-criteria'})}\n        onClick={() => clickHandler(step.id)}\n      >\n        <span\n          className=\"checkbox-icon material-icons-outlined\"\n        >\n          {isChecked(step.id) ? \"check_box\": \"check_box_outline_blank\"}\n        </span>\n        <b>{step.label}</b>\n        {inlineChildren}\n      </label>\n      { !!props.children &&\n        props.children\n      }\n    </>\n  )\n\n}\n\nexport default CheckBox;\n","import React, { useContext } from \"react\";\n\nimport classnames from \"classnames\";\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\n\nconst CallOutText = ({ step }) => {\n\n  const {isCurrentAssessmentFinding} = useContext(ScenarioContext)\n\n  return  (\n    <span className={classnames(\"callout\", {currentCallOut: isCurrentAssessmentFinding(step.id)})}>\n      {step.callout}\n    </span>\n  )\n\n}\n\nexport default CallOutText;","import React, { useContext } from \"react\";\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nconst CallOutIcon = ({ step }) => {\n\n  const { isChecked } = useContext(ScenarioContext)\n\n  return (\n    isChecked(step.id)\n    ?\n      <span\n        className=\"callout-icon material-icons-outlined\"\n        style={{color:'grey'}}\n      >\n        message\n      </span>\n    :\n      <span\n        className=\"callout-icon material-icons-outlined\"\n      >\n        message\n      </span>\n  )\n}\nexport default CallOutIcon;\n","import React, { useContext } from \"react\"\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nconst InterventionForm = ({step}) => {\n\n    const { scenario, shouldDisplayInterventionForm, toggleChecked } = useContext(ScenarioContext)\n\n    const getInterventionsList = () => {\n        return (\n            scenario.interventionForms[step.id].interventions.map((intv) => (\n                <div key={intv.id}>\n                    <label>\n                        <input type=\"checkbox\" />\n                        &nbsp; {intv.label}\n                    </label>\n                </div>\n            ))\n        )\n    }\n\n\n    if (!shouldDisplayInterventionForm(step.id)) {\n        return (<div></div>)\n    } else {\n        return (\n            <div className=\"intervention-form\">\n                <form>\n                    { getInterventionsList() }\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-primary btn-small\"\n                        onClick={() => toggleChecked(step.id)}\n                    >\n                        Submit\n                    </button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default InterventionForm","import React, { useContext } from \"react\"\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\nimport { usePrefs } from \"../contexts/PreferencesContext\"\n\nimport CheckBox from \"./CheckBox\"\nimport CallOutText from \"./CallOutText\"\nimport CallOutIcon from \"./CallOutIcon\"\nimport InterventionButton from \"./InterventionButton\"\nimport InterventionForm from \"./InterventionForm\"\n\nconst CheckListItem = ({step}) => {\n    const { dispAssessmentFindingsInline } = usePrefs()\n    const {\n        isChecked,\n        toggleChecked,\n        toggleAssessmentFinding,\n        toggleDisplayInterventionForm\n    } = useContext(ScenarioContext)\n\n    switch (step.type) {\n        case 'assessment':\n            const inlines = (<CallOutIcon step={step} />)\n            return (\n                <CheckBox\n                    step={step}\n                    clickHandler={toggleAssessmentFinding}\n                    inlineChildren={inlines}\n                >\n                    {dispAssessmentFindingsInline &&\n                        <div>\n                            {isChecked(step.id) &&\n                                <CallOutText step={step} />\n                            }\n                        </div>\n                    }\n                </CheckBox>\n            )\n        case 'intervention':\n            const clickHandler = (step.intervention === \"say\")\n                ? toggleChecked\n                : toggleDisplayInterventionForm\n\n            // const ib = (<InterventionButton step={step} /> )\n\n            return (\n                <CheckBox\n                    step={step}\n                    clickHandler={clickHandler}\n                    // inlineChildren={ib}\n                >\n                    <InterventionForm step={step} />\n                </CheckBox>\n            )\n        default:\n            // case 'required-action':\n            // case 'critical-criteria':\n            // case 'execution-error':\n            return (\n                <CheckBox\n                    step={step}\n                    clickHandler={toggleChecked}\n                />\n            )\n        }\n\n}\n\n\nexport default CheckListItem;","import React, { useState } from \"react\";\n\nimport classnames from \"classnames\";\n\nimport CheckListItem from \"./CheckListItem\"\n\nconst isLeafNode = (step) => {\n  return !step.children.length > 0\n}\n\nexport default function CheckList({ steps, heading, depth = 3, first = false}){\n  const [collapsed, setCollapsed] = useState(false);\n  const toggle = () => {\n    console.log(\"toggling\");\n    setCollapsed(!collapsed);\n  }\n  return (\n    <ul className={classnames({first:  first})}>\n      {steps.map((step) => (\n        <li key={`li-${step.id}`}>\n          {isLeafNode(step)\n          ?\n            <CheckListItem step={step} />\n          :\n            <>\n              <p\n                className={`h${depth}`}\n                onClick={() => toggle()}>\n                  {step.label}\n              </p>\n              <CheckList\n                  steps={step.children}\n                  depth={depth + 1}\n              />\n            </>\n          }\n        </li>\n      )\n      )}\n    </ul>\n  )\n\n}\n","import React, { useState } from \"react\"\n\nimport { usePrefs } from \"../contexts/PreferencesContext\"\n\nimport classnames from \"classnames\"\n\n\nexport default function RevealTableRow({label, values}) {\n    const {inhibitRaterOversharing} = usePrefs()\n    const [show, setShow] = useState(false)\n    const toggle = () => setShow(!show)\n\n    return (\n        <tr>\n            { (!inhibitRaterOversharing)\n            ?\n                <th>{label}</th>\n            :\n                <th onClick={() => toggle()}>{label} </th>\n            }\n            {\n                values.map((value, index) => (\n                    <td key={ index }>\n                        {(!inhibitRaterOversharing)\n                            ?\n                            <span >{value}</span>\n                            :\n                            <span className={classnames({ hidden: !show })}>\n                                {value}\n                            </span>\n                        }\n                    </td>\n                ))\n            }\n        </tr>\n    )\n\n}","import React from \"react\"\n\nimport { Table } from \"reactstrap\"\n\nimport RevealTableRow from \"./RevealTableRow\"\n\nexport default function RevealTable({title, headings=[], rows=[]}) {\n\n    return (\n        <Table striped={true} size=\"sm\">\n            <thead>\n                <tr>\n                    {\n                        headings.map((heading, index) => (\n                            <th key={index}>{heading}</th>\n                        ))\n                    }\n                </tr>\n            </thead>\n            <tbody>\n                {rows.map((row, index) =>\n                    <RevealTableRow\n                        key={index}\n                        label={row.label}\n                        values={row.value}\n                    />\n                )}\n            </tbody>\n        </Table>\n    )\n}","\nimport React,{ useState, useContext, useEffect } from \"react\"\n\nimport {\n    Nav,\n    NavItem,\n    NavLink,\n    TabContent,\n    TabPane,\n    Table,\n} from \"reactstrap\"\n\nimport classnames from \"classnames\"\n\nimport { usePrefs } from \"../contexts/PreferencesContext\"\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nimport CallOutText from \"./CallOutText\"\nimport RevealTable from \"./RevealTable\"\n\nexport default function RaterInfo({defaultTab = \"callouts\"}) {\n    const {dispAssessmentFindingsInline} = usePrefs()\n    const {scenario, isChecked, currentVitals, vitalsRecomputed} = useContext(ScenarioContext)\n    const [activeTab, setActiveTab] = useState(defaultTab)\n    const activateTab = (tab) => {\n        if (activeTab !== tab) setActiveTab(tab)\n    }\n    const isActiveTab = (tab) => tab === activeTab\n\n    // useEffect(\n    //     () => {\n    //         // console.log(`setting active tab to \"${activeTab}\"`)\n    //         // disable the callouts tab ability to be active if assessment findings\n    //         // are supposed to be displayed inline\n    //         if (activeTab === \"callouts\" && dispAssessmentFindingsInline) {\n    //             setActiveTab(\"vitals\")\n    //         }\n    //     }, [dispAssessmentFindingsInline, activeTab]\n    // )\n\n    const getAssessmentFindingsTabPane = () => {\n        const checkedAssessmentSteps = scenario.assessmentSteps.filter(step => isChecked(step.id))\n        const callouts = checkedAssessmentSteps.map(step => {\n            return {\n                id: step.id,\n                label: step.calloutLabel,\n                value: [\n                    <CallOutText\n                        key={step.id}\n                        step={step}\n                        displayAssessmentFindings={true}\n                    />\n                ]\n            }\n        })\n        return (\n            <TabPane tabId = \"callouts\" >\n                {callouts.length > 0 &&\n                    <Table size=\"sm\" striped={true}>\n                        <thead>\n                            <tr>\n                                <th>Assessment</th>\n                                <th>Finding</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {callouts.map((co) => (\n                                <tr key={co.id}>\n                                    <th>{co.label}</th>\n                                    <td>{co.value}</td>\n                                </tr>\n                                )\n                            )}\n                        </tbody>\n                    </Table>\n                }\n            </TabPane >\n        )\n    }\n\n    const getSampleTabPane = () => {\n        const sample = Object.entries(scenario.SAMPLE).map(rec => {\n            return { label: rec[0], value: [rec[1]] }\n        })\n        return (\n            <TabPane tabId = \"sample\" >\n                <RevealTable\n                    title=\"SAMPLE\"\n                    headings={[\"Type\", \"Value\"]}\n                    rows={sample}\n                />\n            </TabPane >\n        )\n    }\n\n    const getVitalsTabPane = () => {\n        // vitals tab will display either 2 or 3 columns, depending on\n        // whether vitals have been recomputed, and thus we need to display\n        // both the initial and current value\n        const vitalsHeaders =\n            vitalsRecomputed\n            ? [\"Vital Sign\", \"Initial Value\", \"Current Value\"]\n            : [\"Vital Sign\", \"Current Value\"]\n\n        const vitals = Object.entries(scenario.initialVitalSigns).map(iv => {\n            const value =\n                vitalsRecomputed\n                ? [ iv[1], currentVitals[iv[0]] ]\n                : [ iv[1] ]\n\n            return {\n                label: iv[0],\n                value: value\n            }\n        })\n\n        return (\n            <TabPane tabId = \"vitals\" >\n                <RevealTable\n                    title=\"Vitals\"\n                    headings={vitalsHeaders}\n                    rows={vitals}\n                />\n            </TabPane >\n        )\n    }\n\n    return (\n        <>\n            <Nav tabs>\n                <NavItem>\n                    <NavLink\n                        className={classnames({ active: isActiveTab('vitals') })}\n                        onClick={() => activateTab('vitals')}\n                    >\n                        Vitals\n                    </NavLink>\n                </NavItem>\n                <NavItem>\n                    <NavLink\n                        className={classnames({ active: isActiveTab('sample') })}\n                        onClick={() => activateTab('sample')}\n                    >\n                        SAMPLE\n                    </NavLink>\n                </NavItem>\n                <NavItem>\n                    <NavLink\n                        className={classnames({ active: isActiveTab('callouts') })}\n                        onClick={() => activateTab('callouts')}\n                    >\n                        Assessment Findings\n                    </NavLink>\n                </NavItem>\n            </Nav>\n            <TabContent activeTab={activeTab}>\n                { getVitalsTabPane() }\n                { getSampleTabPane() }\n                { getAssessmentFindingsTabPane() }\n            </TabContent>\n        </>\n    );\n}","import React, { useContext, useState} from \"react\"\n\nimport { usePrefs } from \"../contexts/PreferencesContext\"\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nimport MDBContainer from \"./MDBContainer\"\nimport CheckList from \"./CheckList\"\nimport RaterInfo from \"./RaterInfo\"\n\nconst CheckListRaterInfoLayout = () => {\n    const { scenario } = useContext(ScenarioContext)\n    const { dispAssessmentFindingsInline } = usePrefs()\n\n    const lhs = (\n        <CheckList\n            heading=\"Checklist\"\n            steps={scenario.steps}\n            first={true}\n            displayAssessmentFindings={dispAssessmentFindingsInline}\n        />\n    )\n\n    return (\n        <MDBContainer\n            lhs={lhs}\n            rhs={<RaterInfo />}\n            lhsWidth={7}\n            rhsWidth={5}\n        />\n    )\n}\n\nexport default CheckListRaterInfoLayout","import React from \"react\"\n\nimport { Button, ButtonGroup } from \"reactstrap\"\n\nimport { usePrefs } from \"../contexts/PreferencesContext\"\n\n\nconst LayoutButtons = () => {\n    const { isCurrentLayout, setCurrentLayout } = usePrefs()\n\n    return (\n        <ButtonGroup>\n            <Button\n                color={isCurrentLayout(\"layout1\") ? \"success\" : \"primary\"}\n                onClick={() => setCurrentLayout(\"layout1\")}\n            >\n                Layout 1\n            </Button>\n            <Button\n                color={isCurrentLayout(\"layout2\") ? \"success\" : \"primary\"}\n                onClick={() => setCurrentLayout(\"layout2\")}\n            >\n                Layout 2\n            </Button>\n        </ButtonGroup>\n    )\n}\n\nexport default LayoutButtons","import React, { useContext } from 'react';\n\nimport {\n    Button,\n    Nav,\n    Navbar,\n    NavbarBrand,\n    NavbarText,\n} from \"reactstrap\";\n\nimport { AuthContext } from \"@meddbriefer/mdb-auth\"\n\n// {/* <Button color=\"primary\" onClick={prefsToggler}>\n//     Preferences\n// </Button> */}\n\n\nconst MDBNavBar = ({title, leftNav = null, rightNav = null }) => {\n\n    const { isAuthenticated, userName, signOutUser } = useContext(AuthContext)\n\n    return (\n        <Navbar color=\"dark\" dark>\n\n            <NavbarBrand href=\"#\">\n                MedDBriefer\n            </NavbarBrand>\n\n            {!!leftNav &&\n                <Nav>\n                {leftNav}\n                </Nav>\n            }\n\n            {!!title &&\n                <NavbarText tag=\"h3\">{title}</NavbarText>\n            }\n\n            <Nav>\n                {isAuthenticated &&\n                <>\n                    <NavbarText>\n                        Welcome, {userName} &nbsp;\n                    </NavbarText>\n                    <Button\n                        color=\"danger\"\n                        onClick={signOutUser}\n                    >\n                        Sign Out\n                    </Button>\n                </>\n                }\n                {!!rightNav &&\n                    rightNav\n                }\n            </Nav>\n\n        </Navbar>\n    )\n}\n\nexport default MDBNavBar;\n","import React, { useContext } from \"react\"\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nimport { Button } from \"reactstrap\"\n\n// I guess I don't need these functions anymore, now that they are only\n// evaluated in a single location\nfunction hasChildren(step) {\n    return step.children && step.children.length > 0\n}\nfunction allChildrenAreHeadings(step) {\n    return step.children.every((child) => child.type === 'heading')\n}\n\nconst Outline = ({ steps, depth = 3, first=false}) => {\n\n    const {setCurrentNode} = useContext(ScenarioContext)\n    return (\n        <ul className={first ? \"first\" : \"\"}>\n        {steps.map((step) => (\n            <li key={step.id}>\n            {\n                (hasChildren(step) && allChildrenAreHeadings(step))\n                ?\n                    <>\n                        <div className={`h${depth + 1} text-primary empty-heading`}>\n                            {step.label}\n                        </div>\n                        <Outline\n                            steps={step.children}\n                            depth={depth + 1}\n                        />\n                    </>\n                :\n                    <Button\n                        color=\"link\"\n                        onClick={() => setCurrentNode(step.id)}>\n                        <span className={`h${depth + 1}`}>\n                            {step.label}\n                        </span>\n                    </Button>\n            }\n            </li>\n\n        ))}\n        </ul>\n    )\n}\n\nexport default Outline;","import React, { useContext, useEffect, useState } from 'react'\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nimport CheckListItem from \"./CheckListItem\"\n// import Panel from \"./Panel\"\nimport RaterInfo from \"./RaterInfo\"\n\n\nconst MDBDetailsPane = () => {\n    const { scenario, currentNode } = useContext(ScenarioContext)\n    const [label, setLabel] = useState(null)\n    const [children, setChildren] = useState([])\n\n\n    useEffect(\n        () => {\n            if(!!currentNode) {\n                setLabel(scenario.nodeLabels[currentNode])\n                setChildren(scenario.items[currentNode])\n            } else {\n                setLabel(null)\n                setChildren([])\n            }\n        },[scenario, currentNode]\n    )\n\n    if (null === label) {\n        return (\n            <div style={{verticalAlign: \"center\"}}>\n                <p className=\"text-center\">\n                    Please click on an outline step to the left to see it's details\n                </p>\n            </div>\n        )\n    }\n    return (\n        <>\n            <h3 className=\"text-center\">\n                {`${label} Details`}\n            </h3>\n            <ul className=\"first\">\n                {children.map((child) =>\n                    <li key={child.id}>\n                        <CheckListItem step={child} />\n                    </li>\n                )}\n            </ul>\n            <RaterInfo defaultTab={\"vitals\"} />\n        </>\n    )\n}\n\nexport default MDBDetailsPane;","import React, { useContext } from \"react\"\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nimport MDBContainer from \"./MDBContainer\"\nimport Outline from \"./Outline\"\nimport MDBDetailsPane from \"./MDBDetailsPane\"\n\nconst NavigationDetailsLayout = () => {\n    const { scenario } = useContext(ScenarioContext)\n\n    const lhs = (\n        <Outline\n            heading=\"Navigation\"\n            steps={scenario.steps}\n            first={true}\n        />\n    )\n\n    return (\n        <MDBContainer\n            lhs={lhs}\n            rhs={<MDBDetailsPane />}\n            lhsWidth=\"5\"\n            rhsWidth=\"7\"\n        />\n    )\n}\n\nexport default NavigationDetailsLayout","import React from 'react'\n\nimport {Modal, ModalHeader, ModalBody} from 'reactstrap';\n\n\nconst MDBModal = (props) => {\n    const {title, show, dismiss, children} = props;\n    return (\n        <Modal isOpen={show} toggle={dismiss} size=\"xl\" backdrop=\"static\">\n            <ModalHeader toggle={dismiss}>\n                <span className=\"h2\">{title}</span>\n            </ModalHeader>\n            <ModalBody>\n                {children}\n            </ModalBody>\n        </Modal>\n    );\n}\n\nexport default MDBModal;","export const formatAsMinSecs = (seconds) => {\n    return new Date(seconds * 1000).toISOString().substr(14, 5)\n}","import React, { useContext, useEffect, useState } from \"react\"\n\nimport { Button, Table } from \"reactstrap\"\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nimport MDBModal from \"./MDBModal\"\n\nimport { formatAsMinSecs } from \"../utils\"\n\nconst ScenarioInfo = () => {\n\n    const { scenario, timers, started, paused, setStarted, setPaused } = useContext(ScenarioContext)\n\n    const [showModal, setShowModal] = useState(!started || paused)\n    const startScenario = () => setStarted(true)\n    const resumeScenario = () => setPaused(false)\n\n    // Modal's isOpen needs to be a simple bool prop, not a method\n    // so we need a a simple bool which is a result of an expression\n    // whenever either of these change\n    useEffect(() => {\n        setShowModal(!started || paused)\n    }, [started, paused])\n\n    return (\n        <MDBModal\n            name=\"Scenario Info\"\n            show={showModal}\n        >\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-6\">\n                        <h3>Instructor Information</h3>\n                        <p>{scenario.info.instructorInformation}</p>\n                    </div>\n                    <div className=\"col-6\">\n                        <h3>Patient Information</h3>\n                        <ul>\n                            <li><b>Moulage:</b> {scenario.info.patientInformation.moulage}</li>\n                            <li><b>Position:</b> {scenario.info.patientInformation.position}</li>\n                            <li><b>Actions:</b> {scenario.info.patientInformation.actions}</li>\n                        </ul>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-6\">\n                        <h3>Dispatch Information</h3>\n                        <p>{scenario.info.dispatchInfo}</p>\n                    </div>\n                    <div className=\"col-6\">\n                        <h3>Scene Assessment</h3>\n                        <p>{scenario.info.sceneAssessment}</p>\n                    </div>\n                </div>\n                <div className=\"row justify-content-md-center\">\n                    <Table size=\"sm\" striped={true}>\n                        <thead>\n                            <tr>\n                                <th>Timer</th>\n                                <th>Duration</th>\n                                <th>Time Remaining</th>\n                                <th>Expired</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {timers.map((timer) => (\n                                <tr\n                                    key={timer.id}\n                                    className=\"h4\"\n                                >\n                                    <td>{timer.id}</td>\n                                    <td>{formatAsMinSecs(timer.duration)}</td>\n                                    <td>{formatAsMinSecs(timer.timeRemaining)}</td>\n                                    <td>{`${timer.expired}`}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </Table>\n                </div>\n                <div className=\"row justify-content-md-center\">\n                    {!started\n                        ? <Button color=\"primary\" size=\"lg\" onClick={startScenario}> Start Scenario</Button>\n                        : <Button color=\"primary\" size=\"lg\" onClick={resumeScenario}> Resume Scenario </Button>\n                    }\n                </div>\n            </div>\n        </MDBModal>\n    )\n}\n\nexport default ScenarioInfo","import React, { useContext } from \"react\"\n\nimport { Button } from \"reactstrap\"\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\"\n\nconst ScenarioInfoButton = () => {\n    const { setPaused } = useContext(ScenarioContext)\n\n    return (\n        <Button\n            color=\"primary\"\n            onClick={() => setPaused(true)}\n        >\n            Scenario Info\n        </Button>\n    )\n}\n\nexport default ScenarioInfoButton\n","import React, { useContext } from 'react';\n\nimport { ScenarioContext } from \"../contexts/ScenarioContext\";\n\nimport { NavbarText } from \"reactstrap\";\n\nimport { formatAsMinSecs } from \"../utils\"\n\nconst Timer = () => {\n\tconst { started, paused, timers } = useContext(ScenarioContext)\n\n\tconst scenTimer = timers.find(timer => timer.id === \"scenario\")\n\n\treturn (\n\t\t<>\n\t\t\t<NavbarText className=\"material-icons-outlined\">\n\t\t\t\t{(paused || !started) ? \"timer_off\" : \"timer\"}\n\t\t\t</NavbarText>\n\t\t\t<NavbarText>{formatAsMinSecs(scenTimer.timeRemaining)}</NavbarText>\n\t\t</>\n\t)\n}\n\nexport default Timer;","const scenarioData = {\n  id: \"PHTC M2CA\",\n  scenarioType: \"trauma\",\n  info: {\n    instructorInformation: \"This skill station involves a middle-aged patient who experienced a rollover with a riding lawn mower. The patient requires airway/breathing management, hemorrhage control, immobilization, and rapid transport to a trauma center. Follow the written scenario, and provide information to all team members as the scenario progresses or as the team members ask.\",\n    patientInformation: {\n      moulage: \"Multiple lacerations to upper and lower extremities; partial amputation of right lower extremity with active bleeding; multiple bruises to chest and abdomen; flail segment to right upper chest; pale, cool, and diaphoretic skin\",\n      position: \"Supine\",\n      actions: \"Opens eyes to pain and becomes progressively more unresponsive\"\n    },\n    dispatchInfo: \"You and your partners work for a transporting EMS agency and have been dispatched to a residential housing development for a lawn mower accident. It is 1330 hr on a Saturday afternoon and the temperature is 90°F (32°C). You are 5 minutes away from a level III trauma center and 25 minutes from a level I trauma center.\",\n    sceneAssessment: \"You arrive at a suburban yard where you observe a large riding lawn mower on its side at the bottom of an 8-ft (2.5-m) hill. A bystander is holding a towel to the patient’s right lower leg. As you approach the patient, the bystander tells you that he saw the mower tip over while the patient was driving it.\",\n    maxTime: 20\n  },\n  assessmentFindings: {\n      \"assess-scene-safety\": \"scene is safe\",\n      \"assess-injury-mechanism\": \"Patient experienced a rollover with a riding lawn mower\",\n      \"assess-num-patients\": \"1 patient\",\n      \"request-addl-help\": \"Additional EMS is on the way.\",\n      \"verbalizes-patient-condition\": \"You arrive at a suburban yard where you observe a large riding lawn mower on its side at the bottom of an 8-ft (2.5-m) hill. A bystander is holding a towel to the patient’s right lower leg. As you approach the patient, the bystander tells you that he saw the mower tip over while the patient was driving it.\",\n      \"determines-loc\": \"Opens eyes to pain and becomes progressively more unresponsive\",\n      \"determines-life-threats\": \"Multiple lacerations to face, scalp, right arm, amputation at the right ankle\",\n      \"assess-airway\": \"Airway is patent\",\n      \"assess-breathing\": \"8 BPM\", // point to vitals?\n      \"assess-ventilation\": \"shallow, irregular\",\n      \"assess-pulse\": \"130; weak radial pulses\", // point to vitals?\n      \"assess-skin\": \"Cyanonic, diaphoretic\",\n      \"assess-bleeding\": \"Major external hemorrhage at lower right leg\",\n      \"assess-mouth-nose-face\": \"Multiple lacerations with minor bleeding\",\n      \"assess-scape-ears\": \"Unremarkable\",\n      \"assess-perrl\": \"Pupils equal, round, and responsive\", // point to vitals?\n      \"assess-trachea\": \"Neck unremarkable\",\n      \"assess-jugular\": \"No JVD\",\n      \"assess-spine\": \"Unremarkable / No step-off\",\n      \"inspects-chest\": \"Multiple lacerations; red marks to right chest\",\n      \"palpate-chest\": \"Flail segment to right upper chest\",\n      \"auscultate-chest\": \"Crepitus on right\",\n      \"assess-abdomen\": \"Soft, nontender\",\n      \"assess-pelvis\": \"Stable\",\n      \"assess-genitalia\": \"Unremarkable\",\n      \"assess-left-leg\": \"Multiple lacerations\",\n      \"assess-right-leg\": \"Amputation of right leg at the ankle\",\n      \"assess-left-arm\": \"Multiple lacerations\",\n      \"assess-right-arm\": \"Multiple lacerations\",\n      \"assess-posterior-thorax\": \"Unremarkable\",\n      \"assess-lumbar-buttocks\": \"Unremarkable\"\n  },\n  initialVitalSigns: {\n    BP: \"96 / palpation\",\n    P: \"130, weak radial pulses\",\n    R: \"38, shallow; LS clear and equal with crepitus on right\",\n    Skin: \"Cyanonic, diaphoretic\",\n    Spo2: \"78 % /RA\",\n    ETCO2: \"64 mm Hg\",\n    GCS: \"8 (E-2, V-2, M-4), PERRLA\",\n    Glucose: \"86 mg/dl(4.8 mmol / l)\",\n    Pain: \"Unable to access\",\n    Temp: \"96.5 F(35.8 C)\"\n  },\n  SAMPLE: {\n    S: \"shortness of breath\",\n    A: \"unknown\",\n    M: \"unknown\",\n    P: \"unknown\",\n    L: \"unknown\",\n    E: \"Riding a lawnmower on an incline and it rolled over the patient\"\n  },\n  reassessmentVitals: {\n    BP: {\n      \"goodVitals\": \"96 / P\",\n      \"badVitals\": \"78 / P\"\n    },\n    P: {\n      \"goodVitals\": \"120, weak\",\n      \"badVitals\": \"130, weak radial pulses\"\n    },\n    R: {\n      \"goodVitals\": \"12, LS clear and equal with crepitus on right\",\n      \"badVitals\": \"38, shallow; LS clear and equal with crepitus on right\"\n    },\n    Skin: {\n      \"goodVitals\": \"Pale, diaphoretic\",\n      \"badVitals\": \"Cyanonic, diaphoretic\"\n    },\n    Spo2: {\n      \"goodVitals\": \"99%, O2 \",\n      \"badVitals\": \"No capture\"\n    },\n    ETCO2: {\n      goodVitals: \"45 mm Hg\",\n      badVitals: \"32 mm Hg\"\n    },\n    GCS: {\n      \"goodVitals\": \"8\",\n      \"badVitals\": \"4\"\n    },\n    Glucose: {\n      \"goodVitals\": \"86 mg/dl(4.8 mmol / l)\",\n      \"badVitals\": \"86 mg/dl(4.8 mmol / l)\"\n    },\n    Pain: {\n      \"goodVitals\": \"Unable to access\",\n      \"badVitals\": \"Unable to access\"\n    },\n    Temp: {\n      \"goodVitals\": \"96.5 F(35.8 C)\",\n      \"badVitals\": \"94.8\"\n    }\n  },\n  interventions: {\n    \"stabilizes-spine\": \"do\", // \"c-spine-interventions\"\n    \"inserts-adjunct\": \"na\",\n    \"manages-airway\": \"do\", // \"airway-interventions\"\n    \"oxygen-therapy\": \"do\", // na?? - no intervention list for it but should be done\n    \"manage-breathing-injury\": \"do\", // ventilation-interventions\n    \"control-bleeding\": \"do\", // \"bleeding-interventions\"\n    \"control-shock\": \"say\", // \"shock-interventions\"\n    \"transport-priority\": \"do\", // \"transport-interventions\"\n  }\n};\n\n\nexport default scenarioData;","import React, { useState, useEffect } from \"react\"\n\nimport { Nav } from \"reactstrap\"\n\nimport { usePrefs } from \"../contexts/PreferencesContext\"\nimport { ScenarioProvider } from \"../contexts/ScenarioContext\"\n\nimport CheckListRaterInfoLayout from \"../components/CheckListRaterInfoLayout\"\nimport LayoutButtons from \"../components/LayoutButtons\"\nimport MDBNavBar from \"../components/MDBNavBar\"\nimport NavigationDetailsLayout from \"../components/NavigationDetailsLayout\"\nimport ScenarioInfo from \"../components/ScenarioInfo\"\nimport ScenarioInfoButton from \"../components/ScenarioInfoButton\"\nimport Timer from \"../components/Timer\"\n\nimport traumaScenarioIndexer from \"../data/traumaScenarioIndexer\"\nimport scenarioData from \"../data/scenario\"\n\nfunction mapKeysToFalse(dict) {\n    const newDict = Object.keys(dict).reduce((obj, key) => {\n        obj[key] = false;\n        return obj;\n    }, {})\n    return newDict;\n}\n\nfunction mapArrayOfObjKeysToFalse(array) {\n    const dict = {}\n    array.forEach((obj) => {dict[obj.id] = false})\n    return dict\n}\n\nfunction mapChildObjKeysToFalse(parent) {\n    const dict = {}\n    Object.keys(parent).forEach((key) => {\n        parent[key].forEach(child => {\n            dict[child.id] = false\n        })\n    })\n    return dict\n}\n\nconst getDefaultValues = (scen) => {\n    return {\n        vitals: scen.initialVitalSigns,\n        vitalsRecomputed: false,\n        currentNode: null,\n        checkListItems: mapChildObjKeysToFalse(scen.items),\n        criticalCriteria: mapArrayOfObjKeysToFalse(scen.criticalCriteria),\n        showForm: mapKeysToFalse(scen.interventionForms)\n    }\n}\n\n\nconst Scenario = ({scenarioId}) => {\n\n    const { dispLeafNodesInline } = usePrefs()\n\n    const [scenario, setScenario] = useState(null)\n\n    const [initValues, setInitValues] = useState(null)\n    // const [showPrefs, setShowPrefs] = useState(false)\n    // const togglePrefs = () => setShowPrefs(!showPrefs)\n\n    useEffect(\n        () => {\n            const loadScen = () => {\n                //ignore scenarioId for now importing hardcoded scen file\n                const scen = traumaScenarioIndexer(scenarioData)\n                setScenario(scen)\n                const defaults = getDefaultValues(scen)\n                setInitValues(defaults)\n            }\n            loadScen()\n        }, []\n    )\n\n    const getLayout = () => {\n        return dispLeafNodesInline\n        ? <CheckListRaterInfoLayout />\n        : <NavigationDetailsLayout />\n    }\n\n    const rightNav = (\n        <>\n            <ScenarioInfoButton />\n            <Timer />\n        </>\n    )\n\n    return (\n        !scenario\n        ? <div>Loading scenario...</div>\n        :\n        <ScenarioProvider\n            scenario={scenario}\n            defaultValues={initValues}\n        >\n            <MDBNavBar\n                leftNav={<LayoutButtons />}\n                title={`Scenario: ${scenario.id}`}\n                rightNav={rightNav}\n            />\n\n            {getLayout()}\n\n            <ScenarioInfo />\n\n        </ScenarioProvider>\n    )\n}\n\nexport default Scenario","import React from \"react\"\n\nimport { Link } from \"react-router-dom\"\n\nimport { Container, Row, Col } from \"reactstrap\"\n\nimport MDBNavBar from \"../components/MDBNavBar\"\n\nconst ScenarioList = (props) => {\n    const scenarios = [\n        {id: 1, name: \"PHTC M2CA\"},\n        {id: 2, name: \"Some Other Scenario\"}\n    ]\n\n    return (\n        <>\n            <MDBNavBar title=\"Scenario List\" />\n            <Container>\n                <Row>\n                    <Col sm=\"3\"></Col>\n                    <Col sm=\"6\">\n                        <h2>Your Assigned Scenarios:</h2>\n                        <ul>\n                            {scenarios.map((scen) => (\n                                <li key={scen.id}>\n                                    <Link className=\"h3\" to={`/scenario/${scen.id}`}> {scen.name}</Link>\n                                </li>\n                            ))}\n                        </ul>\n                    </Col>\n                    <Col sm=\"3\"></Col>\n                </Row>\n            </Container>\n        </>\n    )\n}\n\nexport default ScenarioList","import React from \"react\"\n\nimport MDBNavBar from \"./MDBNavBar\"\n\nconst UnauthedLayout = (props) => {\n\n    return (\n        <>\n            <MDBNavBar\n                title=\"MedDBriefer Authentication\"\n            />\n            { props.children }\n        </>\n    )\n}\n\nexport default UnauthedLayout","import React from \"react\"\n\nimport {\n    HashRouter as Router,\n    Switch,\n    Route\n} from \"react-router-dom\"\n\nimport { AuthProvider, PrivateRoute } from \"@meddbriefer/mdb-auth\"\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport \"./styles.css\";\n\nimport { PreferencesProvider } from \"./contexts/PreferencesContext\"\n\nimport Scenario from \"./routes/Scenario\"\nimport ScenarioList from \"./routes/ScenarioList\"\n\nimport UnauthedLayout from \"./components/UnauthedLayout\"\n\nconst App = (props) => {\n\n\n    return (\n        <AuthProvider>\n            <PreferencesProvider>\n                <Router>\n                    <Switch>\n                        <PrivateRoute\n                            exact path=\"/scenario/:scenarioId\"\n                            authFlowLayout={UnauthedLayout}\n                            component={Scenario}\n                        />\n                        // default (catchall) route\n                        <PrivateRoute\n                            authFlowLayout={UnauthedLayout}\n                            component={ScenarioList}\n                        />\n                    </Switch>\n                </Router>\n            </PreferencesProvider>\n        </AuthProvider>\n    )\n}\n\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\"\n\n// reactstrap is using some deprecated stuff, which brings up warnings, making\n// the console difficult to read.\n//\n// for instance the following pair of warnings, rear their ugly head whenever\n// you display/hide a\n// Modal:\n//\n//   Warning: Legacy context API has been detected within a strict - mode tree.\n\n//       The old API will be supported in all 16.x releases, but applications\n//       using it should migrate to the new version.\n\n//       Please update the following components: Transition\n//\n//   Warning: findDOMNode is deprecated in StrictMode.\n//       findDOMNode was passed an instance of Transition which is inside StrictMode.\n//       Instead, add a ref directly to the element you want to reference.\n//       Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node\n//\n// this is simply the reactstrap project being slow to make use of a dep which\n// fixes the problem. Everything works for the timebeing, and the warning only\n// comes up in development builds (not production)\n//\n// if this is causing you difficulties, you can temporarily (IMPORTANT!\n// remember to re-enable this) not wrapping <App />  with <React.StrictMode>\n// again, I stress *temporarily* as StrictMode will help find other issues as\n// well, and they'll mostly be **our** issues, not 3rd party stuff\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}